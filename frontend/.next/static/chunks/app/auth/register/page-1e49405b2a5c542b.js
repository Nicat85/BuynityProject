(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{8164:function(e,t,a){Promise.resolve().then(a.bind(a,4400))},4400:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var r=a(7437),n=a(3303),s=a(7138),l=a(6463),u=a(2265);function o(){let e=(0,l.useRouter)(),[t,a]=u.useState(""),[o,i]=u.useState(""),[d,c]=u.useState(""),[h,p]=u.useState(""),[f,v]=u.useState(""),[m,y]=u.useState(null),[x,_]=u.useState(!1),b=async a=>{a.preventDefault(),_(!0),y(null);try{let a=await n.Z.post("/auth/register",{fullName:t,email:o,phoneNumber:d,password:h,confirmPassword:f});a.status>=200&&a.status<300&&e.push("/auth/login")}catch(e){var r,s;y((null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||e.message||"Xəta baş verdi")}finally{_(!1)}};return(0,r.jsxs)("main",{className:"mx-auto max-w-md p-6",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold mb-6",children:"Qeydiyyat"}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Ad Soyad",className:"w-full border rounded px-3 py-2",value:t,onChange:e=>a(e.target.value),required:!0}),(0,r.jsx)("input",{type:"email",placeholder:"Email",className:"w-full border rounded px-3 py-2",value:o,onChange:e=>i(e.target.value),required:!0}),(0,r.jsx)("input",{type:"tel",placeholder:"Telefon n\xf6mrəsi",className:"w-full border rounded px-3 py-2",value:d,onChange:e=>c(e.target.value),required:!0}),(0,r.jsx)("input",{type:"password",placeholder:"Şifrə",className:"w-full border rounded px-3 py-2",value:h,onChange:e=>p(e.target.value),required:!0}),(0,r.jsx)("input",{type:"password",placeholder:"Təkrar şifrə",className:"w-full border rounded px-3 py-2",value:f,onChange:e=>v(e.target.value),required:!0}),m&&(0,r.jsx)("p",{className:"text-red-600 text-sm",children:m}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white rounded px-3 py-2 disabled:opacity-50",disabled:x,children:x?"G\xf6zləyin...":"Qeydiyyat"})]}),(0,r.jsxs)("p",{className:"mt-4 text-sm",children:["Hesabın var? ",(0,r.jsx)(s.default,{href:"/auth/login",className:"text-blue-600",children:"Daxil ol"})]})]})}},7138:function(e,t,a){"use strict";a.d(t,{default:function(){return n.a}});var r=a(231),n=a.n(r)},6463:function(e,t,a){"use strict";var r=a(1169);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},3303:function(e,t,a){"use strict";a.d(t,{Z:function(){return c},d:function(){return o}});var r=a(8472);let n={NEXT_PUBLIC_API_BASE_URL:a(357).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:5000"},s=r.Z.create({baseURL:"".concat(n.NEXT_PUBLIC_API_BASE_URL,"/api"),withCredentials:!0}),l=null,u=null;function o(e){var t,a;l=null!==(t=null==e?void 0:e.accessToken)&&void 0!==t?t:null,u=null!==(a=null==e?void 0:e.refreshToken)&&void 0!==a?a:null}s.interceptors.request.use(e=>{if(l){var t;e.headers=null!==(t=e.headers)&&void 0!==t?t:{},e.headers.Authorization="Bearer ".concat(l)}return e});let i=!1,d=[];s.interceptors.response.use(e=>e,async e=>{var t,a,s;let o=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!o._retry&&u){o._retry=!0;try{if(!i){i=!0;let e=await r.Z.post("".concat(n.NEXT_PUBLIC_API_BASE_URL,"/api/auth/refresh-token"),{refreshToken:u},{headers:l?{Authorization:"Bearer ".concat(l)}:void 0}),t=(null===(a=e.data)||void 0===a?void 0:a.data)||(null===(s=e.data)||void 0===s?void 0:s.Data)||e.data,o=t.accessToken||t.AccessToken,c=t.refreshToken||t.RefreshToken||u;l=o,u=c,d.forEach(e=>e(o)),d=[]}return new Promise((e,t)=>{d.push(a=>{if(a){var n;o.headers=null!==(n=o.headers)&&void 0!==n?n:{},o.headers.Authorization="Bearer ".concat(a)}(0,r.Z)(o).then(e).catch(t)})})}catch(e){return d=[],i=!1,Promise.reject(e)}finally{i=!1}}return Promise.reject(e)});var c=s}},function(e){e.O(0,[472,231,971,23,744],function(){return e(e.s=8164)}),_N_E=e.O()}]);